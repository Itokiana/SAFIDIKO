(window.webpackJsonpreact_skeleton=window.webpackJsonpreact_skeleton||[]).push([[0],{114:function(e,t,a){e.exports=a(259)},119:function(e,t,a){},257:function(e,t,a){},259:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(21),c=a.n(l),r=(a(119),a(120),a(9)),s=a(10),i=a(13),m=a(11),u=a(16),d=a(12),h=a(18),p=a(29),b=a(51),v=a(14),g=["https://safidiko.herokuapp.com"],f=a(8),E=a.n(f),N=a(263),y=a(262),O=a(264),_=a(7),C=(a(32),a(67)),S=a(48),k=a.n(S),j=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e,a))).state={voters:[],results_voters:[],session_vote:[],find:"",show:!1,result_qr:"No result"},n.notifyError=function(){_.b.warn("Isoloir Occup\xe9",{position:_.b.POSITION.TOP_CENTER})},n.notifyOK=function(){_.b.info("l'\xe9lecteur peut voter !",{position:_.b.POSITION.TOP_CENTER})},n.handleInputChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value));var t={"Content-Type":"application/json",Authorization:localStorage.getItem("token")};E.a.get("".concat(g,"/api/voters/").concat(e.target.value),{headers:t}).then(function(e){var t=e.data;n.setState({results_voters:t})}).catch(function(e){console.log(e)})},n.handleCheck=function(e){return function(t){if("token"in localStorage){var a={"Content-Type":"application/json",Authorization:localStorage.getItem("token")},o=localStorage.getItem("email");E.a.post("".concat(g,"/api/session_vote/begin"),{email:o,voter:e},{headers:a}).then(function(e){e.data.session_vote.$oid?n.notifyOK():n.notifyError()}).catch(function(e){})}}},n.handleScan=function(e){var t={"Content-Type":"application/json",Authorization:localStorage.getItem("token")};e&&E.a.get("".concat(g,"/api/voters/").concat(e),{headers:t}).then(function(t){var a=t.data;n.setState({find:e,results_voters:a,show:!1})}).catch(function(e){console.log(e)})},n.handleError=function(e){console.error(e)},n.handleCheck=n.handleCheck.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){if("token"in localStorage){var t={"Content-Type":"application/json",Authorization:localStorage.getItem("token")};E.a.get("".concat(g,"/api/voters/"),{headers:t}).then(function(t){var a=t.data;e.setState({voters:a})}).catch(function(e){console.log(e)})}},2e3)}},{key:"getSessionVote",value:function(){var e={"Content-Type":"application/json",Authorization:localStorage.getItem("token")},t=localStorage.getItem("email");E.a.get("".concat(g,"/api/session_vote/check"),{email:t},{headers:e}).then(function(e){e.session_vote_id&&console.log(localStorage.getItem("token"))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=function(){return e.setState({show:!1})};return o.a.createElement("div",{className:"mx-lg-5 mx-md-5 mx-2"},o.a.createElement("div",{className:"card border-0 shadow my-5"},o.a.createElement("div",{className:"card-body p-5"},o.a.createElement("div",{className:"d-flex justify-content-between  mb-5"},o.a.createElement("h1",{className:"font-weight-light"},"Liste des Electeurs / \xa0",o.a.createElement(h.b,{className:"btn btn-outline-primary",to:"/dashboard/ajouterElecteur"},"Ajouter Electeur")),o.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){return e.setState({show:!0})}},o.a.createElement(C.a,null)," qrCode")),o.a.createElement("div",{className:"form-label-group"},o.a.createElement(N.a.Control,{type:"text",name:"find",id:"inputPassword",onChange:this.handleInputChange,value:this.state.find,className:"form-control",placeholder:"Rechercher ..."}),o.a.createElement("label",{htmlFor:"inputPassword"},"Rechercher ...")),o.a.createElement("div",{className:"table-responsive"},o.a.createElement("table",{className:"table table-borderless"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"CIN"),o.a.createElement("th",{scope:"col"},"NOM"),o.a.createElement("th",{scope:"col"},"Pr\xe9nom"),o.a.createElement("th",{scope:"col"}," - "))),o.a.createElement("tbody",null,""===this.state.find?this.state.voters.map(function(t,a){return o.a.createElement("tr",{key:a,className:"animated fadeIn"},o.a.createElement("th",{scope:"row"},t.cin),o.a.createElement("td",null,t.last_name),o.a.createElement("td",null,t.first_name),o.a.createElement("td",null,o.a.createElement("div",{className:"text-left"},1===t.voted?o.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-outline-secondary"},"A d\xe9ja voter"):o.a.createElement("button",{type:"button",onClick:e.handleCheck(t._id.$oid),className:"btn btn-outline-primary"},"Check"))))}):this.state.results_voters.map(function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("th",{scope:"row"},t.cin),o.a.createElement("td",null,t.last_name),o.a.createElement("td",null,t.first_name),o.a.createElement("td",null,o.a.createElement("div",{className:"text-left"},1===t.voted?o.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-outline-secondary"},"A d\xe9ja voter"):o.a.createElement("button",{type:"button",onClick:e.handleCheck(t._id.$oid),className:"btn btn-outline-primary"},"Check"))))})))),o.a.createElement("div",{className:"my-5"}))),o.a.createElement(_.a,null),o.a.createElement(y.a,{show:this.state.show,onHide:t},o.a.createElement(y.a.Header,{closeButton:!0},o.a.createElement(y.a.Title,null,"Scanne qrCode")),o.a.createElement(y.a.Body,null,o.a.createElement(k.a,{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"100%"}})),o.a.createElement(y.a.Footer,null,o.a.createElement(O.a,{variant:"secondary",onClick:t},"Annuler"))))}}]),t}(n.Component),w=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e,a))).state={nom:"",prenom:"",candidates:[],results_voters:[],find:"",session_id:"",voter_id:""},n.notifyOK=function(){_.b.info("Vote avec succ\xe8s!",{position:_.b.POSITION.TOP_CENTER})},n.handleVoter=function(e){return function(t){var a={"Content-Type":"application/json",Authorization:localStorage.getItem("token")};E.a.post("".concat(g,"/api/session_vote/end"),{session_vote:n.state.session_id,candidate:e,voter:n.state.voter_id},{headers:a}).then(function(e){n.notifyOK()}).catch(function(e){})}},n.handleVoter=n.handleVoter.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.renderData(),setInterval(function(){e.renderData()},5e3)}},{key:"renderData",value:function(){var e=this,t={"Content-Type":"application/json",Authorization:localStorage.getItem("token")},a=localStorage.getItem("email");E.a.post("".concat(g,"/api/session_vote/check"),{email:a},{headers:t}).then(function(a){"blank"===a.data.session_vote?e.setState({nom:"",prenom:"",candidates:[]}):(e.setState({nom:a.data.first_name_voter,prenom:a.data.last_name_voter,session_id:a.data.session_vote_id.$oid,voter_id:a.data.voter_id}),E.a.get("".concat(g,"/api/candidates/"),{headers:t}).then(function(t){var a=t.data;e.setState({candidates:a})}).catch(function(e){console.log(e)}))}).catch(function(e){})}},{key:"render",value:function(){var e=this;return o.a.createElement("section",{className:""},o.a.createElement("header",{className:"text-center py-5 mb-4"},o.a.createElement("div",{className:"container"},""===this.state.nom?o.a.createElement("h1",{className:"font-weight-light text-white"},"Aucun Electeur en attente"):o.a.createElement("h1",{className:"font-weight-light text-white"},this.state.prenom+" "+this.state.nom,", choisir voter Candidat"))),o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement("div",{className:"col-md-10 col-10"},o.a.createElement("div",{className:"row"},this.state.candidates.map(function(t,a){return o.a.createElement("div",{className:"col-xl-3 col-md-3 mb-4",key:a},o.a.createElement("div",{className:"card border-0 cardCandidat shadow",onClick:e.handleVoter(t._id.$oid)},o.a.createElement("img",{src:g+"/avatar/"+t.avatar,className:"card-img-top",alt:"..."}),o.a.createElement("div",{className:"card-body text-center"},o.a.createElement("h5",{className:"card-title mb-0"},"Num\xe9ro : ",t.number),o.a.createElement("div",{className:"card-text text-black-50"},t.first_name+" "+t.last_name))))})))),o.a.createElement(_.a,null))}}]),t}(n.Component),I=a(112),x=(a(34),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={general_stats:[],participation:0,total_voter:0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getData(),setInterval(function(){e.getData()},5e3)}},{key:"getData",value:function(){var e=this;if("token"in localStorage){var t={"Content-Type":"application/json",Authorization:localStorage.getItem("token")};E.a.get("".concat(g,"/api/candidates/general_stat"),{headers:t}).then(function(t){if(t.data.results){var a=t.data.results;e.setState({general_stats:a,participation:t.data.participation,total_voter:t.data.total_voter})}else e.setState({general_stats:[]})}).catch(function(e){console.log(e)})}}},{key:"render",value:function(){return o.a.createElement("div",{className:"mx-lg-5 mx-md-5 mx-2 bg-light"},o.a.createElement("ul",{className:"list-group p-3"},o.a.createElement("h1",{className:"font-weight-light mb-5"},"R\xe9sultat global des votes"),o.a.createElement("h3",null,"Taux de participation: ",this.state.participation,"%"),0!==this.state.general_stats.length?this.state.general_stats.map(function(e,t){var a;return o.a.createElement("li",{key:t,className:"list-group-item p-3 mt-4 animated fadeIn"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-4 text-center"},o.a.createElement("img",{className:"shadow rounded rounded-circle",style:{border:"4px solid"},height:"150",src:"https://safidiko.herokuapp.com/avatar/"+e.avatar,alt:""})),o.a.createElement("div",{className:"col-4 candidat-name"},o.a.createElement("h3",null,o.a.createElement("b",null,e.candidate_last_name+" "+e.candidate_first_name)),o.a.createElement("h4",null,"Num\xe9ro: ",e.candidate_number),o.a.createElement("h5",null,o.a.createElement("strong",null,"Nombre de voie:")," ",e.nb_votes)),o.a.createElement("div",{className:"col-4"},o.a.createElement(I.a,(a={height:100,data:{"%Votant":100-e.percent,"%Voies":e.percent}},Object(v.a)(a,"data",{labels:[100-e.percent+"% Votant",e.percent+"% Voie"],datasets:[{label:"# of Votes",data:[100-e.percent,e.percent],backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]}),Object(v.a)(a,"colors",["rgba(0,0,0,.5)","#28a745"]),a)))))}):o.a.createElement("span",null,"Pending...")))}}]),t}(n.Component)),T=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e,a))).state={first_name:"",last_name:"",cin:""},n.notifyOK=function(){_.b.info("Insertion avec succ\xe8s!",{position:_.b.POSITION.TOP_CENTER})},n.handleSubmit=function(e){if(e.preventDefault(),"token"in localStorage){var t={"Content-Type":"application/json",Authorization:localStorage.getItem("token")},a=n.state,o=a.first_name,l=a.last_name,c=a.cin;E.a.post("".concat(g,"/api/voters/create"),{first_name:o,last_name:l,cin:c},{headers:t}).then(function(e){"success"===e.data.created_voter?(n.notifyOK(),setTimeout(function(){n.props.history.push("/dashboard/")},2e3)):console.log("Error")}).catch(function(e){console.log(e)})}},n.handleInputChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"px-5 py-5 mx-lg-5 mx-md-5 mx-2 bg-light"},o.a.createElement("h1",{className:"font-weight-light mb-5"},"Insertion nouveau Electeur"),o.a.createElement("div",{className:"col-md-8 col-10"},o.a.createElement("form",{className:"form-create",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"text",name:"first_name",id:"inputFirst_name",onChange:this.handleInputChange,value:this.state.first_name,className:"form-control",placeholder:"Pr\xe9nom",required:!0,autoFocus:!0}),o.a.createElement("label",{htmlFor:"inputFirst_name"},"Pr\xe9nom")),o.a.createElement("div",{className:"form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"text",name:"last_name",id:"inputLast_name",onChange:this.handleInputChange,value:this.state.last_name,className:"form-control",placeholder:"Nom",required:!0}),o.a.createElement("label",{htmlFor:"inputLast_name"},"Nom")),o.a.createElement("div",{className:"form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"text",name:"cin",id:"inputCin",onChange:this.handleInputChange,value:this.state.cin,className:"form-control",placeholder:"CIN",required:!0}),o.a.createElement("label",{htmlFor:"inputCIN"},"CIN")),o.a.createElement("div",{className:"text-right"},o.a.createElement("button",{className:"btn btn-secondary",type:"submit"},"Valider")))),o.a.createElement(_.a,null))}}]),t}(n.Component),A=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e,a))).state={first_name:"",last_name:"",number:"",avatar:""},n.notifyOK=function(){_.b.info("Insertion avec succ\xe8s!",{position:_.b.POSITION.TOP_CENTER})},n.handleSubmit=function(e){if(e.preventDefault(),"token"in localStorage){var t={"Content-Type":"application/json",Authorization:localStorage.getItem("token")},a=n.state,o=a.first_name,l=a.last_name,c=a.number;a.avatar;E.a.post("".concat(g,"/api/candidates/create"),{first_name:o,last_name:l,number:c},{headers:t}).then(function(e){"success"===e.data.created_candidate?(n.notifyOK(),setTimeout(function(){n.props.history.push("/dashboard/")},2e3)):console.log("Error")}).catch(function(e){console.log(e)})}},n.handleInputChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"px-5 py-5 mx-lg-5 mx-md-5 mx-2 bg-light"},o.a.createElement("h1",{className:"font-weight-light mb-5"},"Insertion nouveau Candidat"),o.a.createElement("div",{className:"col-md-8 col-10"},o.a.createElement("form",{className:"form-create",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"text",name:"first_name",id:"inputFirst_name",onChange:this.handleInputChange,value:this.state.first_name,className:"form-control",placeholder:"Pr\xe9nom",required:!0,autoFocus:!0}),o.a.createElement("label",{htmlFor:"inputFirst_name"},"Pr\xe9nom")),o.a.createElement("div",{className:"form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"text",name:"last_name",id:"inputLast_name",onChange:this.handleInputChange,value:this.state.last_name,className:"form-control",placeholder:"Nom",required:!0}),o.a.createElement("label",{htmlFor:"inputLast_name"},"Nom")),o.a.createElement("div",{className:"form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"number",name:"number",id:"inputNumber",onChange:this.handleInputChange,value:this.state.number,className:"form-control",placeholder:"number",required:!0}),o.a.createElement("label",{htmlFor:"inputNumber"},"NUMERO")),o.a.createElement("div",{className:"text-right"},o.a.createElement("button",{className:"btn btn-secondary",type:"submit"},"Valider")))),o.a.createElement(_.a,null))}}]),t}(n.Component),F=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e,a))).state={number:""},n.notifyOK=function(){_.b.info("Insertion avec succ\xe8s!",{position:_.b.POSITION.TOP_CENTER})},n.handleInputChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"px-5 py-5 mx-lg-5 mx-md-5 mx-2 bg-light"},o.a.createElement("h1",{className:"font-weight-light mb-5"},"Insertion nouveau Media"),o.a.createElement("div",{className:"col-md-8 col-10"},o.a.createElement("div",{className:"form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"number",name:"number",id:"inputNumber",onChange:this.handleInputChange,value:this.state.number,className:"form-control",placeholder:"number",required:!0}),o.a.createElement("label",{htmlFor:"inputNumber"},"NUMERO")),o.a.createElement("div",{className:"form-label-group mb-5"})),o.a.createElement(_.a,null))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleToggle=function(e){a.setState({isShow:!a.state.isShow})},a.logout=a.logout.bind(Object(u.a)(a)),a.handleToggle=a.handleToggle.bind(Object(u.a)(a)),a.state={open:!1,isShow:!0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"logout",value:function(){this.props.callLogout().then(function(){})}},{key:"componentDidMount",value:function(){console.log(this.props),!1===this.props.isAuth&&!0===this.props.appMount&&this.props.history.push("/login"),!1===this.props.isAuth&&!0===this.props.appMount&&this.props.history.push("/login")}},{key:"render",value:function(){var e;return e=o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/dashboard",component:j}),o.a.createElement(p.a,{path:"/dashboard/voter",component:w}),o.a.createElement(p.a,{path:"/dashboard/results",component:x}),o.a.createElement(p.a,{path:"/dashboard/ajouterElecteur",component:T}),o.a.createElement(p.a,{path:"/dashboard/ajouterCandidat",component:A}),o.a.createElement(p.a,{path:"/dashboard/upload",component:F})),o.a.createElement("div",null,"http://localhost:8000/#/dashboard/voter"===window.location.href?o.a.createElement("span",null):o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light static-top mb-5 shadow"},o.a.createElement("div",{className:"container"},o.a.createElement("a",{className:"navbar-brand",href:"/"},o.a.createElement("span",{className:"safid"},"SAFIDI"),o.a.createElement("span",{className:"ko"},"KO")),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item active"},o.a.createElement(h.b,{to:"/dashboard/",className:"nav-link"},"Accueil")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(h.b,{to:"/dashboard/voter",className:"nav-link"},"Voter")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(h.b,{to:"/dashboard/results",className:"nav-link"},"R\xe9sultats")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(h.b,{to:"/dashboard/ajouterCandidat",className:"nav-link"},"Candidats")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(h.b,{to:"/login",onClick:this.logout,className:"nav-link"},o.a.createElement(b.a,null)," D\xe9connexion")))))),o.a.createElement("div",null,e))}}]),t}(n.Component),D=a(261),M=(a(257),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",isAuth:!1,msg_ko:"",open_login:!1},a.notify=function(){_.b.error("Identifiants invalides !",{position:_.b.POSITION.TOP_LEFT})},a.handleInputChange=function(e){a.setState(Object(v.a)({},e.target.name,e.target.value))},a.handleReset=function(){a.setState({email:"",password:""})},a.handleSubmit=function(e){if(e.preventDefault(),a.state.email.trim()&&a.state.password.trim()){var t=a.state,n=t.email,o=t.password;E.a.post("".concat(g,"/session/"),{session:{email:n,password:o}}).then(function(e){e.data.session&&a.props.login().then(function(t){window.localStorage.setItem("token",e.data.session.jwt),window.localStorage.setItem("email",e.data.session.email),a.props.history.push("/dashboard")})}).catch(function(e){a.notify()})}},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){!0===this.props.isAuth&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this,t=this.state.open_login;return o.a.createElement("div",{className:"container",id:"gtc-login"},o.a.createElement("nav",{className:"nav nav-pills nav-fill"},o.a.createElement("button",{type:"button",onClick:function(){return e.setState({open_login:!t})},"aria-expanded":t,className:"nav-item btn btn-outline-light btn-lg mr-2"},"Connexion"),o.a.createElement(h.b,{to:"/sondages",className:"nav-item btn btn-outline-dark btn-lg ml-2"},"Sondages")),o.a.createElement(D.a,{in:this.state.open_login},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-9 col-md-7 col-lg-5 mx-auto"},o.a.createElement("div",{className:"card card-signin my-5"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title text-center"},"Connexion"),o.a.createElement("form",{className:"form-signin",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-label-group"},o.a.createElement(N.a.Control,{type:"email",name:"email",id:"inputEmail",onChange:this.handleInputChange,value:this.state.email,className:"form-control",placeholder:"Email address",required:!0,autoFocus:!0}),o.a.createElement("label",{htmlFor:"inputEmail"},"Adresse email")),o.a.createElement("div",{className:"form-label-group"},o.a.createElement(N.a.Control,{type:"password",name:"password",id:"inputPassword",onChange:this.handleInputChange,value:this.state.password,className:"form-control",placeholder:"Password",required:!0}),o.a.createElement("label",{htmlFor:"inputPassword"},"Mot de passe")),o.a.createElement("div",{className:"custom-control custom-checkbox mb-3"},o.a.createElement(N.a.Control,{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),o.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},"Se souvenir de moi")),o.a.createElement("button",{className:"btn btn-lg btn-primary btn-block text-uppercase",type:"submit"},o.a.createElement(b.b,null)," Se connecter"))))))),o.a.createElement(_.a,null))}}]),t}(n.Component)),q=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),"token"in localStorage?this.props.history.push("/dashboard"):this.props.history.push("/login")}},{key:"render",value:function(){return o.a.createElement("span",null,"ELECTORAL_MADA")}}]),t}(n.Component),R=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e,a))).state={candidates:[],candidate:"",results_voters:[],voter:"",comment:"",file:null,sondages:[],show:!1,result_qr:"No result"},n.notifyOK=function(){_.b.info("Succ\xe8s!",{position:_.b.POSITION.TOP_CENTER})},n.handleScan=function(e){e&&n.setState({voter:e,show:!1})},n.handleError=function(e){console.error(e)},n.handleSubmit=function(e){e.preventDefault();var t=new FormData;t.append("file",n.state.file);var a=n.state,o=a.voter,l=a.candidate,c=a.comment,r=a.file;console.log({voter:o,candidate:l,comment:c,file:r}),E.a.post("".concat(g,"/surveys/create"),t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){"ok"===e.data.success&&(console.log("OKOKOKOKO--------"),n.setState({show:!1}))}).catch(function(e){console.log(e)})},n.handleInputChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n._onchange=function(e){e.preventDefault();var t={"Content-Type":"application/json"},a=new FormData;a.append("file",e.target.files[0]);var o=n.state,l=o.voter,c=o.candidate,r=o.comment;o.file;E.a.post("".concat(g,"/surveys/create"),{voter:l,candidate:c,comment:r},{headers:t}).then(function(e){"ok"===e.data.success&&E.a.post("".concat(g,"/surveys/update"),a,{headers:t}).then(function(e){n.notifyOK()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("".concat(g,"/api/candidates"),{headers:{"Content-Type":"application/json"}}).then(function(t){var a=t.data;e.setState({candidates:a})}).catch(function(e){console.log(e)}),this.getSondages(),setInterval(function(){e.getSondages()},5e3)}},{key:"getSondages",value:function(){var e=this;E.a.get("".concat(g,"/surveys/"),{headers:{"Content-Type":"application/json"}}).then(function(t){var a=t.data;e.setState({sondages:a})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=g+"/surveys/media/";return o.a.createElement("div",{className:"px-5 py-5 mx-lg-5 mx-md-5 mx-2 bg-light my-5"},o.a.createElement("h1",{className:"font-weight-light mb-5"},"Sondages"),o.a.createElement("div",{className:"col-md-12 col-12"},o.a.createElement("form",{className:"form-create",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:" col-md-3 px-1 col-lg-3 col-12 form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"text",name:"comment",id:"inputFirst_name",onChange:this.handleInputChange,value:this.state.first_name,className:"form-control",placeholder:"Pr\xe9nom",required:!0,autoFocus:!0}),o.a.createElement("label",{htmlFor:"inputFirst_name"},"Comment")),o.a.createElement("div",{className:"col-md-3 px-1 col-lg-3 col-12 form-label-group mb-5"},o.a.createElement(N.a.Control,{as:"select",name:"candidate",className:"h-100",value:this.state.candidate,onChange:this.handleInputChange,required:!0},o.a.createElement("option",{value:""},"Candidat"),this.state.candidates.map(function(e,t){return o.a.createElement("option",{key:t,value:e._id.$oid},e.last_name+" #"+e.number)}))),o.a.createElement("div",{className:" col-md-3 px-1 col-lg-3 col-12 form-label-group mb-5",onClick:function(){return e.setState({show:!0})}},o.a.createElement(N.a.Control,{disabled:!0,type:"text",name:"comment",id:"inputFirst_name",onChange:this.handleInputChange,value:this.state.voter,className:"form-control",placeholder:"Pr\xe9nom",required:!0,autoFocus:!0}),o.a.createElement("label",{htmlFor:"inputFirst_name"},"CIN")),o.a.createElement("div",{className:" col-md-3 px-1 col-lg-3 col-12 form-label-group mb-5"},o.a.createElement(N.a.Control,{type:"file",name:"file",id:"inputLast_name",onChange:this._onchange,value:this.state.file,className:"form-control",placeholder:"Nom",required:!0}),o.a.createElement("label",{htmlFor:"inputLast_name"},"Ficher")))),o.a.createElement("div",{className:"col-md-10 col-10"},o.a.createElement("div",{className:"row"},0!==this.state.sondages.length?this.state.sondages.map(function(e,a){return o.a.createElement("div",{className:"col-xl-3 col-md-3 mb-4",key:a},o.a.createElement("div",{class:"card"},o.a.createElement("img",{src:t+e.id.$oid,class:"card-img-top"}),o.a.createElement("div",{class:"card-body"},o.a.createElement("h5",{class:"card-title"},e.candidate_name+" #"+e.candidate_number),o.a.createElement("p",{class:"card-text text-dark"},">> ",e.comment),o.a.createElement("i",{class:"text-primary"},e.voter_name))))}):o.a.createElement("small",null,"Aucun Sondage")))),o.a.createElement(_.a,null),o.a.createElement(y.a,{show:this.state.show,onHide:function(){return e.setState({show:!1})}},o.a.createElement(y.a.Header,{closeButton:!0},o.a.createElement(y.a.Title,null,"Scanne qrCode")),o.a.createElement(y.a.Body,null,o.a.createElement(k.a,{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"100%"}})),o.a.createElement(y.a.Footer,null)))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).login=a.login.bind(Object(u.a)(a)),a.state={isAuth:!1,appMount:!1},a.callLogout=a.callLogout.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"login",value:function(){var e=this;return new Promise(function(t,a){setTimeout(function(){e.setState({isAuth:!0}),t(!0)},300)})}},{key:"componentDidMount",value:function(){"token"in window.localStorage&&this.setState({isAuth:!0}),this.setState({appMount:!0})}},{key:"callLogout",value:function(){return this.setState({isAuth:!1}),console.log("______logout"),new Promise(function(e,t){window.localStorage.clear(),e(!0)})}},{key:"render",value:function(){var e=this;return o.a.createElement(n.Suspense,{fallback:"loading"},o.a.createElement("div",{className:"content_main"},o.a.createElement(h.a,null,o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/dashboard",component:function(t){return o.a.createElement(P,Object.assign({},t,{appMount:e.state.appMount,callLogout:e.callLogout,isAuth:e.state.isAuth}))}}),o.a.createElement(p.a,{exact:!0,path:"/sondages",component:function(e){return o.a.createElement(R,null)}}),o.a.createElement(p.a,{exact:!0,path:"/",component:function(t){return o.a.createElement(q,Object.assign({},t,{login:e.login,isAuth:e.state.isAuth}))}}),o.a.createElement(p.a,{exact:!0,path:"/login",component:function(t){return o.a.createElement(M,Object.assign({},t,{login:e.login,isAuth:e.state.isAuth}))}})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[114,1,2]]]);
//# sourceMappingURL=main.0304139a.chunk.js.map